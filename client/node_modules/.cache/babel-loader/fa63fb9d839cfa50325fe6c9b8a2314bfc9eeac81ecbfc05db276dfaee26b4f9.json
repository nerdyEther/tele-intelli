{"ast":null,"code":"var _jsxFileName = \"/Users/neelansh/PROJECTS/tele_intelli/tele-intelli/client/src/components/modals/LoginModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth } from '../AuthContext'; // Import the useAuth hook\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginModal = ({\n  isOpen,\n  onClose\n}) => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const navigate = useNavigate();\n  const {\n    setUser\n  } = useAuth(); // Use the useAuth hook to access setUser\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('http://localhost:7777/login', {\n        email,\n        password\n      });\n      console.log('Login response:', response); // Add this log to check the response\n\n      if (response.status === 200) {\n        const userData = {\n          token: response.data.token,\n          email\n        };\n        setUser(userData);\n        localStorage.setItem('token', response.data.token); // Store token in local storage\n        console.log('Token stored in localStorage:', response.data.token); // Log to confirm token is stored\n        onClose();\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      console.error('Login failed:', error);\n      if (error.response && error.response.status === 401) {\n        setErrorMessage('Invalid email or password. Please try again.');\n      } else {\n        setErrorMessage('An unexpected error occurred. Please try again later.');\n      }\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 backdrop-blur-sm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-br from-blue-900 to-indigo-900 rounded-xl p-8 shadow-2xl w-full max-w-md relative overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-0 left-0 w-full h-full bg-white opacity-10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-white mb-6 relative z-10\",\n        children: \"Welcome Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 mb-4\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4 relative z-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"block text-blue-200 mb-1\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"email\",\n            type: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            className: \"w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            required: true,\n            placeholder: \"Enter your email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"block text-blue-200 mb-1\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"password\",\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            className: \"w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            required: true,\n            placeholder: \"Enter your password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-4 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 right-4 opacity-30\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          className: \"text-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n            x: \"3\",\n            y: \"11\",\n            width: \"18\",\n            height: \"11\",\n            rx: \"2\",\n            ry: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M7 11V7a5 5 0 0 1 10 0v4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginModal, \"4hKffwH2S8tXLnVtp6kBwdoKL4w=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = LoginModal;\nexport default LoginModal;\nvar _c;\n$RefreshReg$(_c, \"LoginModal\");","map":{"version":3,"names":["React","useState","useNavigate","axios","useAuth","jsxDEV","_jsxDEV","LoginModal","isOpen","onClose","_s","email","setEmail","password","setPassword","errorMessage","setErrorMessage","navigate","setUser","handleSubmit","e","preventDefault","response","post","console","log","status","userData","token","data","localStorage","setItem","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","type","value","onChange","target","required","placeholder","onClick","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x","y","rx","ry","d","_c","$RefreshReg$"],"sources":["/Users/neelansh/PROJECTS/tele_intelli/tele-intelli/client/src/components/modals/LoginModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; \nimport axios from 'axios'; \nimport { useAuth } from '../AuthContext'; // Import the useAuth hook\n\nconst LoginModal = ({ isOpen, onClose }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState(''); \n  const navigate = useNavigate(); \n  const { setUser } = useAuth(); // Use the useAuth hook to access setUser\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('http://localhost:7777/login', { email, password });\n  \n      console.log('Login response:', response); // Add this log to check the response\n  \n      if (response.status === 200) {\n        const userData = { token: response.data.token, email };\n        setUser(userData); \n        localStorage.setItem('token', response.data.token); // Store token in local storage\n        console.log('Token stored in localStorage:', response.data.token); // Log to confirm token is stored\n        onClose(); \n        navigate('/dashboard'); \n      }\n    } catch (error) {\n      console.error('Login failed:', error);\n      if (error.response && error.response.status === 401) {\n        setErrorMessage('Invalid email or password. Please try again.'); \n      } else {\n        setErrorMessage('An unexpected error occurred. Please try again later.'); \n      }\n    }\n  };\n  \n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 backdrop-blur-sm\">\n      <div className=\"bg-gradient-to-br from-blue-900 to-indigo-900 rounded-xl p-8 shadow-2xl w-full max-w-md relative overflow-hidden\">\n        <div className=\"absolute top-0 left-0 w-full h-full bg-white opacity-10\"></div>\n        <h2 className=\"text-3xl font-bold text-white mb-6 relative z-10\">Welcome Back</h2>\n        {errorMessage && <p className=\"text-red-500 mb-4\">{errorMessage}</p>} \n        <form onSubmit={handleSubmit} className=\"space-y-4 relative z-10\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-blue-200 mb-1\">Email</label>\n            <input\n              id=\"email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n              placeholder=\"Enter your email\"\n            />\n          </div>\n          <div>\n            <label htmlFor=\"password\" className=\"block text-blue-200 mb-1\">Password</label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-4 py-2 rounded-lg bg-white bg-opacity-20 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n              placeholder=\"Enter your password\"\n            />\n          </div>\n          <div className=\"flex space-x-4 mt-6\">\n            <button\n              type=\"submit\"\n              className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              Login\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n        <div className=\"absolute bottom-4 right-4 opacity-30\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-blue-200\">\n            <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n          </svg>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}